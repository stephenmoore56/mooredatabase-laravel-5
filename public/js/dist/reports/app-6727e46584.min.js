var mooredatabaseReportsApp;mooredatabaseReportsApp=angular.module("mooredatabaseReportsApp",["ngRoute"],["$interpolateProvider",function(t){"use strict";t.startSymbol("<%"),t.endSymbol("%>")}]),function(){"use strict";mooredatabaseReportsApp.factory("reportCharts",function(){return{drawChartSpeciesByMonth:function(t,e){var r,a,n,o,i,s,c,p;if(0!==t.length){var u=Plotly.d3,l=90,d=90,f=u.select("#"+e).style({width:l+"%",height:d+"vh"}),h=f.node();for(r=[],a=[],n=[],c=0;c<t.length;c++)r[c]=t[c].monthName.substring(0,3),a[c]=t[c].speciesCount,n[c]=t[c].tripCount;i={x:r,y:a,name:"Species",type:"bar",marker:{color:"#ff7f0e"}},s={x:r,y:n,name:"Trips",mode:"lines+markers",marker:{color:"#3072AB"}},o=[i,s],p={margin:{l:50,r:5,b:50,t:30,pad:5},xaxis:{title:"Month",type:"category"},yaxis:{title:"Species / Trips"}},Plotly.newPlot(e,o,p,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]}),window.onresize=function(){Plotly.Plots.resize(h)}}},drawChartSpeciesByYear:function(t,e){var r,a,n,o,i,s,c,p;if(0!==t.length){var u=Plotly.d3,l=90,d=90,f=u.select("#"+e).style({width:l+"%",height:d+"vh"}),h=f.node();for(r=[],a=[],n=[],c=0;c<t.length;c++)r[c]=t[c].yearNumber,a[c]=t[c].speciesCount,n[c]=t[c].tripCount;i={x:r,y:a,name:"Species",type:"bar",marker:{color:"green"}},s={x:r,y:n,name:"Trips",mode:"lines+markers",marker:{color:"red"}},o=[i,s],p={margin:{l:50,r:5,b:50,t:30,pad:5},xaxis:{title:"Year",type:"category"},yaxis:{title:"Species / Trips"}},Plotly.newPlot(e,o,p,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]}),window.onresize=function(){Plotly.Plots.resize(h)}}},drawChartMonthsForSpecies:function(t,e){var r,a,n,o,i,s;if(0!==t.length){var c=Plotly.d3,p=90,u=90,l=c.select("#"+e).style({width:p+"%",height:u+"vh"}),d=l.node();for(r=[],a=[],i=0;i<t.length;i++)r[i]=t[i].monthName.substring(0,3),a[i]=t[i].sightingCount;o={x:r,y:a,name:"Sightings",type:"bar",marker:{color:"#ff7f0e"}},n=[o],s={legend:{xanchor:"center",yanchor:"top",y:-.3,x:.5},margin:{l:50,r:5,b:50,t:30,pad:5},xaxis:{title:"Month",type:"category"},yaxis:{title:"Sightings"}},Plotly.newPlot(e,n,s,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]}),window.onresize=function(){Plotly.Plots.resize(d)}}},drawChartSpeciesByOrder:function(t,e){var r,a,n,o,i,s;if(0!==t.length){var c=Plotly.d3,p=90,u=90,l=c.select("#"+e).style({width:p+"%",height:u+"vh"}),d=l.node();for(r=[],a=[],i=0;i<t.length;i++)r[i]=t[i].order_name,a[i]=t[i].speciesCount;o={values:a,labels:r,type:"pie"},n=[o],s={margin:{l:50,r:5,b:100,t:30,pad:5}},Plotly.newPlot(e,n,s,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]}),window.onresize=function(){Plotly.Plots.resize(d)}}},drawChartSpeciesByCounty:function(t,e){var r,a,n,o,i,s,c,p;if(0!==t.length){var u=Plotly.d3,l=90,d=90,f=u.select("#"+e).style({width:l+"%",height:d+"vh"}),h=f.node();for(r=[],a=[],n=[],c=0;c<t.length;c++)r[c]=t[c].countyName,a[c]=t[c].speciesCount,n[c]=t[c].tripCount;i={y:r,x:a,name:"Species",type:"bar",marker:{color:"#B733FF"},orientation:"h"},s={y:r,x:n,name:"Trips",type:"bar",marker:{color:"#33E75F"},orientation:"h"},o=[i,s],p={title:"Species &amp; Trips By County",margin:{l:100,r:5,b:5,t:75,pad:5},yaxis:{title:"",type:"category"},xaxis:{title:""}},Plotly.newPlot(e,o,p,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]}),window.onresize=function(){Plotly.Plots.resize(h)}}}}})}(),function(){"use strict";var t="http://lumen.moore-database.com";mooredatabaseReportsApp.factory("speciesByMonthData",["$http",function(e){return{getData:function(){return e.get(t+"/api/reports/speciesByMonth").then(function(t){return t.data.data})}}}]).factory("speciesByYearData",["$http",function(e){return{getData:function(){return e.get(t+"/api/reports/speciesByYear").then(function(t){return t.data.data})}}}]).factory("speciesForMonthData",["$http",function(e){return{getData:function(r){return e.get(t+"/api/reports/speciesForMonth/"+r.toString()).then(function(t){return t.data.data})}}}]).factory("speciesForYearData",["$http",function(e){return{getData:function(r){return e.get(t+"/api/reports/speciesForYear/"+r.toString()).then(function(t){return t.data.data})}}}]).factory("speciesDetailData",["$http",function(e){return{getData:function(r){return e.get(t+"/api/reports/speciesDetail/"+r.toString()).then(function(t){return t.data.data})}}}]).factory("monthsForSpeciesData",["$http",function(e){return{getData:function(r){return e.get(t+"/api/reports/monthsForSpecies/"+r.toString()).then(function(t){return t.data.data})}}}]).factory("speciesByOrderData",["$http",function(e){return{getData:function(){return e.get(t+"/api/reports/speciesByOrder").then(function(t){return t.data.data})}}}]).factory("speciesForOrderData",["$http",function(e){return{getData:function(r){return e.get(t+"/api/reports/speciesForOrder/"+r.toString()).then(function(t){return t.data.data})}}}]).factory("speciesAllData",["$http",function(e){return{getData:function(){return e.get(t+"/api/reports/speciesAll").then(function(t){return t.data.data})}}}]).factory("listOrdersData",["$http",function(e){return{getData:function(){return e.get(t+"/api/reports/listOrders").then(function(t){return t.data.data})}}}]).factory("listOrdersAllData",["$http",function(e){return{getData:function(){return e.get(t+"/api/reports/listOrdersAll").then(function(t){return t.data.data})}}}]).factory("searchAllData",["$http",function(e){return{getData:function(r,a){return e.get(t+"/api/reports/searchAll/"+r+"/"+a.toString()).then(function(t){return t.data.data})}}}]).factory("speciesByLocationData",["$http",function(e){return{getData:function(){return e.get(t+"/api/reports/speciesByLocation").then(function(t){return t.data.data})}}}]).factory("speciesByCountyData",["$http",function(e){return{getData:function(){return e.get(t+"/api/reports/speciesByCounty").then(function(t){return t.data.data})}}}]).factory("speciesForLocationData",["$http",function(e){return{getData:function(r){return e.get(t+"/api/reports/speciesForLocation/"+r.toString()).then(function(t){return t.data.data})}}}]).factory("locationDetailData",["$http",function(e){return{getData:function(r){return e.get(t+"/api/reports/locationDetail/"+r.toString()).then(function(t){return t.data.data})}}}])}(),function(){"use strict";mooredatabaseReportsApp.filter("searchBirds",function(){return function(t,e){if(!e||!t)return t;var r=new RegExp(e,"i"),a=t.filter(function(t){if(t.common_name.match(r)||t.scientific_name.match(r)||t.order_name.match(r)||t.family.match(r)||t.subfamily.match(r))return!0});return a}})}(),function(){"use strict";mooredatabaseReportsApp.directive("speciesList",function(){return{replace:!0,restrict:"E",templateUrl:"/templates/directives/species-list.html"}}).directive("speciesListYear",function(){return{replace:!0,restrict:"E",templateUrl:"/templates/directives/species-list-year.html"}})}(),function(){"use strict";mooredatabaseReportsApp.controller("searchAllCtrl",["$scope","searchAllData","listOrdersAllData",function(t,e,r){r.getData().then(function(e){t.orders=e}),t.predicate=["common_name"],t.sortResults=function(e){t.reverse=JSON.stringify(t.predicate)===JSON.stringify(e)&&!t.reverse,t.predicate=e},t.searchString=" ",t.orderId=-1,t.searchAll=function(){t.searchString=""===t.searchString?" ":t.searchString,e.getData(t.searchString,t.orderId).then(function(e){t.data=e})}}])}(),function(){"use strict";mooredatabaseReportsApp.controller("speciesAllCtrl",["$scope","speciesAllData","listOrdersData",function(t,e,r){e.getData().then(function(e){t.data=e}),r.getData().then(function(e){t.orders=e}),t.predicate=["common_name"],t.sortResults=function(e){t.reverse=JSON.stringify(t.predicate)===JSON.stringify(e)&&!t.reverse,t.predicate=e}}])}(),function(){"use strict";mooredatabaseReportsApp.controller("speciesByLocationCtrl",["$scope","$filter","speciesByLocationData","speciesByCountyData","reportCharts",function(t,e,r,a,n){r.getData().then(function(e){t.data=e}),a.getData().then(function(t){var r=e("orderBy")(t,t.speciesCount,!0);n.drawChartSpeciesByCounty(r,"chart_div_1")}),t.predicate=["location_name"],t.sortResults=function(e){t.reverse=JSON.stringify(t.predicate)===JSON.stringify(e)&&!t.reverse,t.predicate=e}}])}(),function(){"use strict";mooredatabaseReportsApp.controller("speciesByMonthCtrl",["$scope","speciesByMonthData","reportCharts",function(t,e,r){e.getData().then(function(e){t.data=e,r.drawChartSpeciesByMonth(e,"chart_div_1")}),t.predicate=["common_name"],t.sortResults=function(e){t.reverse=JSON.stringify(t.predicate)===JSON.stringify(e)&&!t.reverse,t.predicate=e}}])}(),function(){"use strict";mooredatabaseReportsApp.controller("speciesByOrderCtrl",["$scope","speciesByOrderData","reportCharts",function(t,e,r){e.getData().then(function(e){t.data=e,r.drawChartSpeciesByOrder(e,"chart_div_1")}),t.predicate=["common_name"],t.reverse=!1,t.sortResults=function(e){t.reverse=JSON.stringify(t.predicate)===JSON.stringify(e)&&!t.reverse,t.predicate=e}}])}(),function(){"use strict";mooredatabaseReportsApp.controller("speciesByYearCtrl",["$scope","speciesByYearData","reportCharts",function(t,e,r){e.getData().then(function(e){t.data=e,r.drawChartSpeciesByYear(e,"chart_div_1")}),t.predicate=["common_name"],t.sortResults=function(e){t.reverse=JSON.stringify(t.predicate)===JSON.stringify(e)&&!t.reverse,t.predicate=e}}])}(),function(){"use strict";mooredatabaseReportsApp.controller("speciesDetailCtrl",["$scope","speciesDetailData","monthsForSpeciesData","reportCharts",function(t,e,r,a){t.speciesId=$("#speciesId").val().trim(),e.getData(t.speciesId).then(function(e){t.bird=e[0],t.common_name=e[0].common_name,null!==t.bird.last_seen?(t.showChart=!0,r.getData(t.speciesId).then(function(e){t.data=e,a.drawChartMonthsForSpecies(e,"chart_div_1")})):t.showChart=!1}),t.goBack=function(){window.history.back()},t.predicate=["common_name"],t.sortResults=function(e){t.reverse=JSON.stringify(t.predicate)===JSON.stringify(e)&&!t.reverse,t.predicate=e}}])}(),function(){"use strict";mooredatabaseReportsApp.controller("speciesForLocationCtrl",["$scope","speciesForLocationData","locationDetailData","listOrdersData",function(t,e,r,a){t.locationId=$("#locationId").val().trim(),t.showChart=!0,r.getData(t.locationId).then(function(e){t.location=e[0]}),e.getData(t.locationId).then(function(e){t.data=e}),a.getData().then(function(e){t.orders=e}),t.goBack=function(){window.history.back()},t.predicate=["common_name"],t.sortResults=function(e){t.reverse=JSON.stringify(t.predicate)===JSON.stringify(e)&&!t.reverse,t.predicate=e}}])}(),function(){"use strict";mooredatabaseReportsApp.controller("speciesForMonthCtrl",["$scope","speciesForMonthData","listOrdersData",function(t,e,r){t.monthNumber=$("#monthNumber").val().trim(),e.getData(t.monthNumber).then(function(e){t.data=e,t.monthName=e[0].monthName}),r.getData().then(function(e){t.orders=e}),t.goBack=function(){window.history.back()},t.predicate=["common_name"],t.sortResults=function(e){t.reverse=JSON.stringify(t.predicate)===JSON.stringify(e)&&!t.reverse,t.predicate=e}}])}(),function(){"use strict";mooredatabaseReportsApp.controller("speciesForOrderCtrl",["$scope","speciesForOrderData",function(t,e){t.orderId=$("#orderId").val().trim(),e.getData(t.orderId).then(function(e){t.data=e,t.orderName=e[0].order_name}),t.goBack=function(){window.history.back()},t.predicate=["common_name"],t.sortResults=function(e){t.reverse=JSON.stringify(t.predicate)===JSON.stringify(e)&&!t.reverse,t.predicate=e}}])}(),function(){"use strict";mooredatabaseReportsApp.controller("speciesForYearCtrl",["$scope","speciesForYearData","listOrdersData",function(t,e,r){t.year=$("#year").val().trim(),e.getData(t.year).then(function(e){t.data=e}),r.getData().then(function(e){t.orders=e}),t.goBack=function(){window.history.back()},t.predicate=["common_name"],t.sortResults=function(e){t.reverse=JSON.stringify(t.predicate)===JSON.stringify(e)&&!t.reverse,t.predicate=e}}])}();